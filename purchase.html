<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>支付页面 - MyChronicle</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .payment-container {
            max-width: 800px;
            margin: 0 auto;
            padding: 120px 20px 40px;
        }
        
        .payment-header {
            text-align: center;
            margin-bottom: 50px;
        }
        
        .payment-header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 20px;
        }
        
        .payment-header p {
            font-size: 1.2rem;
            color: var(--text-secondary);
        }
        
        .plan-summary {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-bottom: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
        }
        
        .plan-info {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        
        .plan-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }
        
        .pro-plan .plan-icon {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }
        
        .premium-plan .plan-icon {
            background: linear-gradient(135deg, #ff6b6b 0%, #feca57 100%);
        }
        
        .plan-details h3 {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 5px;
        }
        
        .plan-price {
            font-size: 2rem;
            font-weight: 800;
            color: var(--primary-color);
        }
        
        .payment-methods {
            background: white;
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
        }
        
        .payment-methods h2 {
            font-size: 1.8rem;
            font-weight: 700;
            color: var(--text-primary);
            margin-bottom: 30px;
            text-align: center;
        }
        
        .payment-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .payment-method {
            background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            cursor: pointer;
        }
        
        .payment-method:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }
        
        .payment-method.selected {
            border-color: var(--primary-color);
            background: linear-gradient(135deg, #e3f2fd 0%, #f3e5f5 100%);
        }
        
        .payment-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 15px;
            color: white;
            font-size: 1.8rem;
        }
        
        .alipay .payment-icon {
            background: linear-gradient(135deg, #1677ff 0%, #4096ff 100%);
        }
        
        .wechat .payment-icon {
            background: linear-gradient(135deg, #07c160 0%, #38d9a9 100%);
        }
        
        .bank .payment-icon {
            background: linear-gradient(135deg, #722ed1 0%, #9254de 100%);
        }
        
        .manual .payment-icon {
            background: linear-gradient(135deg, #fa8c16 0%, #ffa940 100%);
        }
        
        .payment-method h3 {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 8px;
        }
        
        .payment-method p {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.4;
        }
        
        .payment-actions {
            text-align: center;
            margin-top: 30px;
        }
        
        .btn-payment {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 16px 32px;
            border: none;
            border-radius: 12px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            margin: 0 10px;
        }
        
        .btn-payment:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.3);
        }
        
        .btn-secondary {
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
        }
        
        .btn-secondary:hover {
            background: var(--primary-color);
            color: white;
        }
        
        .payment-info {
            background: #f8fafc;
            border-radius: 12px;
            padding: 20px;
            margin-top: 30px;
            border-left: 4px solid var(--primary-color);
        }
        
        .payment-info h4 {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 10px;
        }
        
        .payment-info ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        
        .payment-info li {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 5px 0;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .payment-info li i {
            color: #50c878;
            font-size: 0.8rem;
        }
        
        .contact-info {
            background: white;
            border-radius: 16px;
            padding: 30px;
            margin-top: 30px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-color);
            text-align: center;
        }
        
        .contact-info h3 {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
            margin-bottom: 15px;
        }
        
        .contact-info p {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }
        
        .contact-methods {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .contact-method {
            display: flex;
            align-items: center;
            gap: 8px;
            padding: 10px 16px;
            background: #f8fafc;
            border-radius: 8px;
            color: var(--text-primary);
            text-decoration: none;
            transition: all 0.3s ease;
        }
        
        .contact-method:hover {
            background: var(--primary-color);
            color: white;
        }
        
        @media (max-width: 768px) {
            .payment-grid {
                grid-template-columns: 1fr;
            }
            
            .contact-methods {
                flex-direction: column;
                align-items: center;
            }
            
            .btn-payment {
                width: 100%;
                margin: 5px 0;
            }
        }
        
        /* 收款码模态框样式 */
        .qr-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            animation: fadeIn 0.3s ease;
        }
        
        .qr-modal-content {
            background: white;
            border-radius: 16px;
            max-width: 500px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideIn 0.3s ease;
        }
        
        .qr-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid #e2e8f0;
        }
        
        .qr-header h3 {
            margin: 0;
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--text-primary);
        }
        
        .qr-close {
            background: none;
            border: none;
            font-size: 24px;
            color: #6b7280;
            cursor: pointer;
            padding: 0;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }
        
        .qr-close:hover {
            background: #f3f4f6;
            color: #374151;
        }
        
        .qr-body {
            padding: 24px;
        }
        
        .qr-info {
            background: #f8fafc;
            padding: 16px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .qr-info p {
            margin: 8px 0;
            color: var(--text-primary);
        }
        
        .qr-code-container {
            text-align: center;
            margin-bottom: 24px;
        }
        
        .qr-code {
            width: 200px;
            height: 200px;
            border: 2px solid #e2e8f0;
            border-radius: 12px;
            object-fit: contain;
            background: white;
        }
        
        .qr-tip {
            margin-top: 12px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }
        
        .qr-steps {
            margin-bottom: 20px;
        }
        
        .qr-steps h4 {
            margin: 0 0 12px 0;
            font-size: 1rem;
            color: var(--text-primary);
        }
        
        .qr-steps ol {
            margin: 0;
            padding-left: 20px;
            color: var(--text-secondary);
        }
        
        .qr-steps li {
            margin-bottom: 6px;
            line-height: 1.5;
        }
        
        .qr-contact {
            background: #f0f9ff;
            padding: 16px;
            border-radius: 8px;
            border-left: 4px solid var(--primary-color);
        }
        
        .qr-contact p {
            margin: 6px 0;
            color: var(--text-primary);
            font-size: 0.9rem;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideIn {
            from { 
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }
            to { 
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }
        
        @media (max-width: 480px) {
            .qr-modal-content {
                width: 95%;
                margin: 20px;
            }
            
            .qr-code {
                width: 160px;
                height: 160px;
            }
            
            .qr-body {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- 导航栏 -->
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <i class="fas fa-book-open"></i>
                <span>MyChronicle</span>
            </div>
            <div class="nav-menu">
                <a href="index.html" class="nav-link">首页</a>
                <a href="features.html" class="nav-link">功能</a>
                <a href="pricing.html" class="nav-link">会员</a>
                <a href="contact.html" class="nav-link">联系我们</a>
            </div>
            <div class="nav-auth">
                <a href="login.html" class="btn-secondary">登录</a>
                <a href="login.html" class="btn-primary">注册</a>
            </div>
        </div>
    </nav>

    <!-- 支付页面内容 -->
    <main class="payment-container">
        <div class="payment-header">
            <h1>选择支付方式</h1>
            <p>请选择您偏好的支付方式完成订阅</p>
        </div>

        <!-- 套餐信息 -->
        <div class="plan-summary">
            <div class="plan-info">
                <div class="plan-icon" id="planIcon">
                    <i class="fas fa-rocket"></i>
                </div>
                <div class="plan-details">
                    <h3 id="planName">Pro 套餐</h3>
                    <div class="plan-price" id="planPrice">¥29/月</div>
                </div>
            </div>
        </div>

        <!-- 支付方式 -->
        <div class="payment-methods">
            <h2>选择支付方式</h2>
            
            <div class="payment-grid">
                <div class="payment-method alipay" onclick="selectPayment('alipay')">
                    <div class="payment-icon">
                        <i class="fab fa-alipay"></i>
                    </div>
                    <h3>支付宝</h3>
                    <p>扫码支付，安全便捷</p>
                </div>
                
                <div class="payment-method wechat" onclick="selectPayment('wechat')">
                    <div class="payment-icon">
                        <i class="fab fa-weixin"></i>
                    </div>
                    <h3>微信支付</h3>
                    <p>微信扫码，快速支付</p>
                </div>
                
                <div class="payment-method bank" onclick="selectPayment('bank')">
                    <div class="payment-icon">
                        <i class="fas fa-university"></i>
                    </div>
                    <h3>银行转账</h3>
                    <p>对公账户，支持发票</p>
                </div>
                
                <div class="payment-method manual" onclick="selectPayment('manual')">
                    <div class="payment-icon">
                        <i class="fas fa-handshake"></i>
                    </div>
                    <h3>人工处理</h3>
                    <p>联系客服，人工开通</p>
                </div>
            </div>
            
            <div class="payment-actions">
                <button class="btn-payment" id="payButton" onclick="processPayment()" disabled>
                    <i class="fas fa-credit-card"></i>
                    立即支付
                </button>
                <a href="pricing.html" class="btn-payment btn-secondary">
                    <i class="fas fa-arrow-left"></i>
                    返回选择套餐
                </a>
            </div>
        </div>

        <!-- 支付说明 -->
        <div class="payment-info">
            <h4>支付说明</h4>
            <ul>
                <li><i class="fas fa-check"></i> 支付成功后，会员权限将在24小时内自动开通</li>
                <li><i class="fas fa-check"></i> 支持7天无理由退款，如有问题请联系客服</li>
                <li><i class="fas fa-check"></i> 所有支付信息均经过加密处理，确保安全</li>
                <li><i class="fas fa-check"></i> 企业用户支持对公转账和发票开具</li>
            </ul>
        </div>

        <!-- 联系信息 -->
        <div class="contact-info">
            <h3>需要帮助？</h3>
            <p>如果您在支付过程中遇到任何问题，请随时联系我们</p>
            <div class="contact-methods">
                <a href="mailto:csrll5555@163.com" class="contact-method">
                    <i class="fas fa-envelope"></i>
                    <span>邮箱联系</span>
                </a>
                <a href="tel:17848359438" class="contact-method">
                    <i class="fas fa-phone"></i>
                    <span>电话咨询</span>
                </a>
                <a href="contact.html" class="contact-method">
                    <i class="fas fa-comments"></i>
                    <span>在线客服</span>
                </a>
            </div>
        </div>
    </main>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-logo">
                    <i class="fas fa-book-open"></i>
                    <span>MyChronicle</span>
                </div>
                <div class="footer-links">
                    <a href="privacy.html">隐私政策</a>
                    <a href="terms.html">服务条款</a>
                    <a href="help.html">帮助中心</a>
                    <a href="contact.html">联系我们</a>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2024 MyChronicle. 让成长被温柔记录。</p>
            </div>
        </div>
    </footer>

    <script>
        let selectedPayment = '';
        let currentPlan = 'pro';
        let currentPrice = '29';

        // 从URL获取套餐信息
        function getPlanFromURL() {
            const urlParams = new URLSearchParams(window.location.search);
            const plan = urlParams.get('plan');
            
            if (plan === 'premium') {
                currentPlan = 'premium';
                currentPrice = '59';
                document.getElementById('planName').textContent = 'Premium 套餐';
                document.getElementById('planPrice').textContent = '¥59/月';
                document.getElementById('planIcon').innerHTML = '<i class="fas fa-crown"></i>';
                document.getElementById('planIcon').parentElement.classList.add('premium-plan');
            }
        }

        // 选择支付方式
        function selectPayment(method) {
            // 移除所有选中状态
            document.querySelectorAll('.payment-method').forEach(el => {
                el.classList.remove('selected');
            });
            
            // 添加选中状态
            event.currentTarget.classList.add('selected');
            selectedPayment = method;
            
            // 启用支付按钮
            document.getElementById('payButton').disabled = false;
        }

        // 处理支付
        function processPayment() {
            if (!selectedPayment) {
                alert('请先选择支付方式');
                return;
            }

            switch(selectedPayment) {
                case 'alipay':
                    // 支付宝支付 - 显示收款二维码
                    showAlipayQR();
                    break;
                case 'wechat':
                    // 微信支付 - 显示收款二维码
                    showWechatQR();
                    break;
                case 'bank':
                    // 银行转账信息
                    showBankInfo();
                    break;
                case 'manual':
                    // 人工处理
                    showManualProcess();
                    break;
            }
        }

        // 显示银行转账信息
        function showBankInfo() {
            const bankInfo = `
🏦 银行转账信息

💳 收款账户信息：
账户名：MyChronicle
开户行：中国工商银行
账号：6222032806008186948

💰 转账金额：¥${currentPrice}
📝 转账备注：MyChronicle-${currentPlan}-${new Date().getTime()}

📋 转账步骤：
1. 打开您的银行APP或网银
2. 选择"转账汇款"功能
3. 输入上述账户信息
4. 输入转账金额：¥${currentPrice}
5. 添加转账备注（重要！）
6. 确认信息后完成转账

📞 转账完成后请联系我们：
📧 邮箱：csrll5555@163.com
💬 微信：MyChronicle_Service
📱 电话：17848359438

⏰ 我们将在24小时内为您开通会员权限
            `;
            alert(bankInfo);
        }

        // 显示人工处理流程
        function showManualProcess() {
            const manualInfo = `
🤝 人工处理流程

💬 联系客服开通：
1. 添加客服微信：MyChronicle_Service
2. 发送消息："我要开通${currentPlan}套餐"
3. 客服将为您生成专属支付链接
4. 完成支付后立即开通会员权限

🏦 网银支付选项：
如果您希望使用网银支付，请联系客服获取：
- 对公账户信息
- 网银转账指导
- 发票开具服务

📞 其他联系方式：
📧 邮箱：csrll5555@163.com
📱 电话：17848359438

⏰ 客服工作时间：工作日 9:00-18:00
            `;
            alert(manualInfo);
        }

        // 显示支付宝收款二维码
        function showAlipayQR() {
            // 创建收款码显示模态框
            const modal = document.createElement('div');
            modal.className = 'qr-modal';
            modal.innerHTML = `
                <div class="qr-modal-content">
                    <div class="qr-header">
                        <h3>💰 支付宝收款</h3>
                        <button class="qr-close" onclick="closeQRModal()">&times;</button>
                    </div>
                    <div class="qr-body">
                        <div class="qr-info">
                            <p><strong>收款金额：</strong>¥${currentPrice}</p>
                            <p><strong>收款人：</strong>MyChronicle</p>
                        </div>
                        <div class="qr-code-container">
                            <img src="images/alipay.jpg" alt="支付宝收款码" class="qr-code" onerror="showQRPlaceholder(this)">
                            <p class="qr-tip">请使用支付宝扫描上方二维码</p>
                        </div>
                        <div class="qr-steps">
                            <h4>支付步骤：</h4>
                            <ol>
                                <li>打开支付宝APP</li>
                                <li>点击"扫一扫"功能</li>
                                <li>扫描上方二维码</li>
                                <li>确认金额后完成支付</li>
                            </ol>
                        </div>
                        <div class="qr-contact">
                            <p><strong>支付完成后请联系我们：</strong></p>
                            <p>📧 邮箱：csrll5555@163.com</p>
                            <p>💬 微信：MyChronicle_Service</p>
                            <p>📱 电话：17848359438</p>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // 显示微信收款二维码
        function showWechatQR() {
            // 创建收款码显示模态框
            const modal = document.createElement('div');
            modal.className = 'qr-modal';
            modal.innerHTML = `
                <div class="qr-modal-content">
                    <div class="qr-header">
                        <h3>💬 微信收款</h3>
                        <button class="qr-close" onclick="closeQRModal()">&times;</button>
                    </div>
                    <div class="qr-body">
                        <div class="qr-info">
                            <p><strong>收款金额：</strong>¥${currentPrice}</p>
                            <p><strong>收款人：</strong>MyChronicle</p>
                        </div>
                        <div class="qr-code-container">
                            <img src="images/wechat.jpg" alt="微信收款码" class="qr-code" onerror="showQRPlaceholder(this)">
                            <p class="qr-tip">请使用微信扫描上方二维码</p>
                        </div>
                        <div class="qr-steps">
                            <h4>支付步骤：</h4>
                            <ol>
                                <li>打开微信APP</li>
                                <li>点击右上角"+"号</li>
                                <li>选择"扫一扫"功能</li>
                                <li>扫描上方二维码</li>
                                <li>确认金额后完成支付</li>
                            </ol>
                        </div>
                        <div class="qr-contact">
                            <p><strong>支付完成后请联系我们：</strong></p>
                            <p>📧 邮箱：csrll5555@163.com</p>
                            <p>💬 微信：MyChronicle_Service</p>
                            <p>📱 电话：17848359438</p>
                        </div>
                    </div>
                </div>
            `;
            document.body.appendChild(modal);
        }

        // 关闭收款码模态框
        function closeQRModal() {
            const modal = document.querySelector('.qr-modal');
            if (modal) {
                modal.remove();
            }
        }
        
        // 显示二维码占位符
        function showQRPlaceholder(img) {
            img.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgZmlsbD0iI2Y4ZmFmYyIvPgogIDx0ZXh0IHg9IjEwMCIgeT0iMTAwIiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IiM2Yjc1ODUiIHRleHQtYW5jaG9yPSJtaWRkbGUiPuaXoOazleiDveWKoOi9veWbvueJhzwvdGV4dD4KPC9zdmc+';
            img.alt = '请上传收款二维码图片';
        }
        
        // 点击模态框背景关闭
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('qr-modal')) {
                closeQRModal();
            }
        });
        
        // 页面加载时初始化
        document.addEventListener('DOMContentLoaded', function() {
            getPlanFromURL();
        });
    </script>
</body>
</html>